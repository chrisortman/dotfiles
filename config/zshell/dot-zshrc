is-macos() {
  [[ $OSTYPE == darwin* ]]
}

export EDITOR=vim
export HISTFILE=~/.zsh_history
export HISTSIZE=10000
export SAVEHIST=1000
setopt SHARE_HISTORY

source /home/cortman/.antidote/antidote.zsh

# initialize plugins statically with ~/.zsh_plugins.txt
antidote load

autoload -Uz promptinit && promptinit && prompt pure

# Not sure why this setting is ignored in my config.toml file
# So i export env var here
export MISE_IGNORED_CONFIG_PATHS="/Users/cortman/.config/mise/config.toml"

export REPORTTIME=60

eval "$(mise activate zsh)"

# zsh-vi-mode compatibility function for fzf
zvm_after_init() {
  if command -v fzf >/dev/null 2>&1; then
    eval "$(fzf --zsh)"
  fi
}

alias rc="bin/rails console"

# Function to report directory
__report_working_directory() {
    echo "orb" > /mnt/mac/tmp/last.txt
    echo $PWD > /mnt/mac/tmp/lastdir.txt
    printf '\e]7;file://%s%s\a' "$HOST" "$PWD"
}

# Add to precmd hook (runs before each prompt)
autoload -Uz add-zsh-hook
add-zsh-hook precmd __report_working_directory

# Override cd to report immediately
cd() {
    builtin cd "$@"
    __report_working_directory
}


